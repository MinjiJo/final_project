<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Events">
	<insert id = "insertEvent">
		<!--  글번호 -->
		<selectKey resultType = "int" order = "BEFORE" keyProperty = "event_num">
			select nvl(max(EVENT_NUM), 0)+1 from event
		</selectKey>
		insert into event(event_num, mem_key, title, content, even_date, event_start, event_end, event_room, event_pic) 
		values(#{event_num}, #{id}, #{event_title}, #{event_date}, #{event_start}, #{event_room}, #{eventPic_originalfile})
	</insert>
	
	<select id = "count" resultType = "int">
		select count(*) from event
	</select>
	
	<select id = "detail" parameterType = "int" resultType = "Event">
		select * from event where event_num = #{event_num}
	</select>
</mapper>