<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="event_comment">
<!--  추후 확인!! 
	<delete id = "delete_event_comment" parameterType = "event">
			<![CDATA[	
		delete from event_event 
			where com_re_ref = #{com_re_ref}  
			and com_re_lev >= #{com_re_lev}  
			and com_re_seq >= #{com_re_seq}   
			and com_re_seq <(
								nvl((SELECT min(com_re_seq) 
								FROM event_comment
								WHERE com_re_ref=#{com_re_ref}
								AND   com_re_lev=#{com_re_lev}
								AND   com_re_seq>#{com_re_seq}),
								(SELECT max(com_re_seq)+1 
								 FROM event_comment
			                     WHERE com_re_ref=#{com_re_ref}))
			                   )
	]]>
	</delete>-->
	
		<select id = "getList" parameterType = "int" resultType = "event_comment">
			select * from event_comment
			where event_num = #{event_num} order by com_date desc
		</select>
	
		<insert id = "insert" parameterType = "event_comment">
			insert into event_comment
			values((select nvl(max(event_com_num), 0)+1 from event_comment), #{mem_key}, #{event_num}, 
			#{com_content}, sysdate, 0, 0, 0)
		</insert>
	
		<delete id = "delete" parameterType = "int">
			delete event_comment where num = #{num}
		</delete>
	
		<update id = "update" parameterType = "event_comment">
			update event_comment set content=#{com_content} where num = #{num}
		</update>
	
</mapper>